# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Overview

Windows-focused Doom Emacs dotfiles repository. Configures Emacs development environment on Windows 10/11 with Evil mode (Vim keybindings).

## Installation & Setup

```powershell
# Fresh install
.\install.ps1

# After modifying init.el or packages.el
doom sync

# Rebuild Doom (after major changes)
doom build
```

The install script creates a symlink from `~\.config\doom` to the `doom/` directory and runs `setup-doom.ps1` which installs dependencies via winget.

## Doom Configuration Structure

- **init.el** - Module declarations (what Doom features to enable). Edit to add/remove language support, tools, etc.
- **config.el** - Custom Emacs Lisp configuration. Main file for custom behavior.
- **packages.el** - Additional package declarations beyond Doom modules.
- **custom.el** - Auto-generated by Emacs. Don't edit manually.

## Key Configuration Details

**Theme:** `doom-horizon`

**Shell configuration (Windows-specific):**
- `shell-file-name`: cmdproxy.exe (for compile, M-!, M-&)
- `explicit-shell-file-name`: powershell.exe (for M-x shell, SPC o t)
- eshell always works (pure Elisp)

**Projectile:** Test command is `.\test`, keybinding `SPC p t`

**Compilation notifications:** Toggle ntfy.sh notifications with `SPC c n`. Sends build/test results to ntfy.sh/xmachine.

## Enabled Doom Modules

Completion: corfu +orderless, vertico
Editor: evil +everywhere, snippets, whitespace
Tools: magit, eval +overlay, lookup, lsp +eglot, tree-sitter
Languages: emacs-lisp, markdown, org, sh, yaml, cc +lsp, csharp
Terminal: eshell, shell

## Decision Records

Major decisions (package choices, architectural patterns, tool selections) are documented in `decisions/` as Architecture Decision Records (ADRs).

**Guidelines:**
- Document the "why" behind significant choices, not just the "what"
- Include alternatives considered and rationale for rejection
- Revisit decisions periodically as the ecosystem evolves
- Format: `decisions/NNN-short-description.md`

**Current decisions:**
- `001-emacs-packages.md` - LSP client, language servers, ctags, eshell packages

## Documentation Practices

This documentation follows an **append-only** approach where it makes sense:
- New features and configurations are added to existing sections
- Historical context is preserved rather than overwritten
- Changes are additive to maintain a living record of the configuration's evolution
- Only remove content when it's genuinely obsolete or misleading
